= ACME Musikplayer - Development Setup 🛠️

Experimentelles Architektur-Labor für erfahrene Entwickler.

== Voraussetzungen

* **Java 21** - JDK installiert und verfügbar
* **Docker & Docker Compose** - für PostgreSQL Container
* **Maven** - über Wrapper `./mvnw` verfügbar

== Quick Start

[source,bash]
----
# Alles in einem: DB starten + Migration + Code Generation + Tests + App starten
./mvnw clean verify spring-boot:run
----

**Anwendung läuft auf:** http://localhost:8080

== Entwicklungsworkflow

=== TDD-Cycle

[source,bash]
----
# 1. Tests laufen lassen
./mvnw test

# 2. Spezifische Component Tests
./mvnw test -Dtest="**/*ComponentTest"

# 3. Coverage Report generieren
./mvnw clean verify jacoco:report
open jacocoreport/target/site/jacoco-aggregate/index.html
----

=== Database Management (Development)

[source,bash]
----
# DB neu aufsetzen (bei Schema-Änderungen)
./mvnw docker-compose:up@run-docker liquibase:update jooq-codegen:generate

# Nur App starten (DB läuft bereits)
./mvnw spring-boot:run

# DB zurücksetzen für Tests
./mvnw liquibase:dropAll liquibase:update
----

=== Multi-Module Development Build

[source,bash]
----
# Gesamtes Projekt entwickeln
./mvnw clean verify

# Nur Hauptanwendung
./mvnw -pl services/acme clean verify

# Mit Dependencies
./mvnw -pl services/acme -am clean verify

# Kontinuierliche Tests
./mvnw -pl services/acme test -Dtest.continuous=true
----

== Architektur-Details

**Module-Struktur:**
* `services/acme/` - Hauptanwendung (Modulith) * `libs/events/` - Event-System * `libs/common-api/` - Shared DTOs * `jacocoreport/` - Aggregierte Coverage * `e2e/` - End-to-End Tests

**Database-First Workflow:**
1. Liquibase Migration in `services/acme/src/main/resources/db/changelog/`
2. JOOQ Code Generation aus DB Schema → `services/acme/src/generated/java/`
3. Repository Implementation mit type-safe SQL

== Testing-Strategie

**T2T (Test-to-Test) Approach:**
* Keine klassischen Unit-Tests * Component Tests mit Cucumber Features * Fake Adapters für Business Logic Isolation * >90% Code Coverage erreicht

**Development Test-Befehle:**

[source,bash]
----
# Cucumber Features
./mvnw test -Dcucumber.filter.tags="@musikplayer"

# Integration Tests
./mvnw test -Dtest="**/*IntegrationTest"

# E2E Tests (benötigt laufende App)
./mvnw test -pl e2e

# Watch Mode für kontinuierliche Tests
./mvnw test -Dtest.watch=true
----

---

💡 **Experimenteller Kontext:** Vollständige Details in xref:componenttesting.adoc[Component Testing] und xref:architecture-learnings.adoc[Architecture Learnings].
